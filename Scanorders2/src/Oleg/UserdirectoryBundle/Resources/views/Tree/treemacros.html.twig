{#macros for tree#}

{% macro jstree( label, jstreeid ) %}
    {#{% import "OlegOrderformBundle::Default/formmacros.html.twig" as formmacros %}#}
    <p>
    <div class="row jstree-parent-container">
        <div class="col-xs-6" align="right">
            <strong>{{ label }}</strong>
        </div>
        <div class="col-xs-6" align="left">
            <p>
                <input class="form-control form-control-modif not-mapped-simplefield jstree-search" type="search" placeholder="Search" />
            </p>
            <div class="{{ jstreeid }}"></div>
        </div>
    </div>
    </p>
{% endmacro %}


{% macro compositeTreeNode( tree ) %}
    {% import _self as treemacros %}
    {% import "OlegOrderformBundle::Default/formmacros.html.twig" as formmacros %}
    <p>
    <div class="composite-tree-holder">
        <div style="display: none;">
            {% if tree.breadcrumbs is defined %}
                {{ formmacros.field(tree.breadcrumbs) }}
            {% endif %}
            {% if tree.id is defined %}
                {{ formmacros.field(tree.id) }}
            {% endif %}
            {% if tree.parent is defined %}
                {{ formmacros.field(tree.parent) }}
            {% endif %}
        </div>

        {% set nodeLabel = 'Node:' %}
        {% if tree.institutionnode is defined %}
            {#{{ formmacros.field(tree.institutionnode) }}#}
            {% set nodeLabel = tree.institutionnode.vars.label %}
        {% endif %}
        {#{% set userpositionLabel = 'Position Type:' %}#}
        {#{% if tree.userPositions is defined %}#}
            {#{% set userpositionLabel = tree.userPositions.vars.positionTypes.vars.label %}#}
            {#{{ formmacros.field(tree.userPositions) }}#}
        {#{% endif %}#}

        {#<div class="row">#}
            {#<div class="col-xs-6" align="right">#}
                {#&#123;&#35;<strong>{{ nodeLabel }}</strong>&#35;&#125;#}
                {#{{ form_label(tree.institutionnode) }}#}
            {#</div>#}
            {#<div class="col-xs-6" align="left">#}
                {#<input id="tree-{{ nodeLabel }}" class="ajax-combobox-institution" type="hidden" />#}
                {#<input id="userposition-{{ nodeLabel }}" class="ajax-combobox-userpositions" type="hidden" />#}
                {#{{ form_widget(tree.institutionnode) }}#}
                {#{{ form_widget(tree.institutionnode) }}#}
            {#</div>#}
        {#</div>#}

        {{ treemacros.compositeSingleTreeNode(tree) }}

    </div>
    </p>
{% endmacro %}

{% macro compositeSingleTreeNode( tree ) %}
    <div class="row">
        <div class="col-xs-6" align="right">
            {#<strong>{{ nodeLabel }}</strong>#}
            {{ form_label(tree.institutionnode) }}
        </div>
        <div class="col-xs-6" align="left">
            {#<input id="tree-{{ nodeLabel }}" class="ajax-combobox-institution" type="hidden" />#}
            {#<input id="userposition-{{ nodeLabel }}" class="ajax-combobox-userpositions" type="hidden" />#}
            {{ form_widget(tree.institutionnode) }}
            {{ form_widget(tree.institutionnode) }}
        </div>
    </div>
{% endmacro %}

{#{% macro compositeSimplefieldTree( label, jstreeid ) %}#}
    {#&#123;&#35;{% import "OlegOrderformBundle::Default/formmacros.html.twig" as formmacros %}&#35;&#125;#}
    {#<p>#}
    {#<div class="row jstree-parent-container">#}
        {#<div class="col-xs-6" align="right">#}
            {#<strong>{{ label }}</strong>#}
        {#</div>#}
        {#<div class="col-xs-6" align="left">#}
            {#<p>#}
                {#<input class="form-control form-control-modif not-mapped-simplefield jstree-search" type="search" placeholder="Search" />#}
            {#</p>#}
            {#<div class="{{ jstreeid }}"></div>#}
        {#</div>#}
    {#</div>#}
    {#</p>#}
{#{% endmacro %}#}
