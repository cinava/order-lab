<!DOCTYPE html>

<html>

<head>

    {% stylesheets
        'bundles/olegorderform/bootstrap/css/*' filter='cssrewrite'
        'bundles/olegorderform/select2/select2.css' filter='cssrewrite'
        'bundles/olegorderform/form/css/form.css' filter='cssrewrite'
    %}
        <link rel="stylesheet" type="text/css" media="screen" href="{{ asset_url }}" />
    {% endstylesheets %}

    {% stylesheets
        'bundles/olegorderform/datepicker/css/datepicker3.css' filter='cssrewrite'
    %}
        <link rel="stylesheet" type="text/css" media="screen" href="{{ asset_url }}" />
    {% endstylesheets %}


    <title>Request an Aperio eSlide Manager Account</title>

    {#<meta name="viewport" content="width=device-width, initial-scale=1.0">#}

    <meta name = "viewport" content = "user-scalable=no, initial-scale=1.0, maximum-scale=1.0, width=device-width"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>


    <link rel="icon" type="image/x-icon" href="{{ asset('favicon.ico') }}" />

</head>

<body>


    {% import "OlegOrderformBundle::Default/formmacros.html.twig" as myform %}

    <div class="container text-center">

        <input type="hidden" id="baseurl" value="{{app.request.host}}{{app.request.getBaseURL()}}" />
        <input type="hidden" id="formcicle" value="accountreq" />
        <input type="hidden" id="orderformtype" value="single" />

        <h2 class="alert alert-info well-lg safary-fix" align="center">Request an Aperio eSlide Manager Account</h2>

        <br>

        <form id="accountrequestform" action="{{ path('accountrequest_create') }}" method="post" {{ form_enctype(form) }}>

            {{ form_errors(form) }}

            <p>
                <div class="row">
                    <div class="col-xs-6" align="right">
                        {#<b>Do you (the requester) have a <a href="javascript:;" onclick="window.open('http://weill.cornell.edu/its/identity-security/identity/cwid/');return false;">CWID</a> username?</b>#}
                        <b>Do you (the requester) have a <a href="http://weill.cornell.edu/its/identity-security/identity/cwid/">CWID</a> username?</b>
                    </div>
                    <div class="col-xs-6" align="left">
                        {{ form_widget(form.hascwid) }}
                    </div>
                </div>
            </p>

            {{ myform.field(form.cwid) }}

            <div id="password_field" class="collapse">
                <div class="well" align='center'>
                    {{ myform.field(form.password) }}
                </div>
            </div>

            {{ myform.field(form.name) }}

            {{ myform.field(form.email) }}

            {{ myform.field(form.phone) }}
            {{ myform.field(form.job) }}
            {{ myform.field(form.institution) }}
            {{ myform.field(form.department) }}
            {{ myform.field(form.pathologyServices) }}
            {{ myform.field(form.request) }}
            {{ myform.field(form.similaruser) }}

            <p style="padding-top:3px;">
            <div class="row">
                <div class="col-xs-6" align="right">
                    <label>
                        For reference, please provide the name and contact information of your supervisor or of the person who can confirm the validity of your request below.
                    </label>
                </div>
                <div class="col-xs-6" align="left">
                </div>
            </div>
            <div class="row">
                <div class="col-xs-6" align="right">
                    {{ form_label(form.referencename) }}
                </div>
                <div class="col-xs-6" align="left">
                    {{ form_widget(form.referencename) }}
                </div>
            </div>
            </p>
            {#{{ myform.field(form.referencename) }}#}

            {{ myform.field(form.referenceemail) }}
            {{ myform.field(form.referencephone) }}

            {% do form.creationdate.setRendered %}

            {#{{ form_rest(form) }}#}
            {{ form_widget(form._token) }}


            <br>
            <p>
                <button class="btn btn-info" type="button" onclick="submitRequestForm()">Submit</button>
            </p>

            <br>
            <p>
                <a href="{{ path('login') }}">Return to Log In page</a>
            </p>

        </form>

        {#dummy login form with style="display:none"#}
        <form id="loginform" action="{{ path('login_check') }}" method="post" style="display:none">
            <input type="hidden" name="display_height" id="display_height" value="" />
            <input type="hidden" name="display_width" id="display_width" value="" />
            <input type="text" id="username" name="_username" value="" class="form-control" placeholder="Username" autofocus>
            <input type="password" id="password" name="_password" class="form-control" placeholder="Password">
        </form>

        {% include 'OlegOrderformBundle::Default/footer.html.twig' %}

    </div> <!-- /container -->

    {#'@OlegOrderformBundle/Resources/public/form/js/checkForm.js'#}
    {#'@OlegOrderformBundle/Resources/public/q-1/q.js'#}

    <!-- send width and height info to the server -->
    {% javascripts
        '@OlegOrderformBundle/Resources/public/form/js/errorwatch.js'
        '@OlegOrderformBundle/Resources/public/jquery/jquery-1.11.0.min.js'
        '@OlegOrderformBundle/Resources/public/bootstrap/js/*'
        '@OlegOrderformBundle/Resources/public/select2/select2.js'
        '@OlegOrderformBundle/Resources/public/inputmask/jquery.inputmask.bundle.js'
        '@OlegOrderformBundle/Resources/public/form/js/selectAjax.js'
        '@OlegOrderformBundle/Resources/public/form/js/masking.js'
        '@OlegOrderformBundle/Resources/public/form/js/form.js'
        '@OlegOrderformBundle/Resources/public/form/js/commonCheckForm.js'
        '@OlegOrderformBundle/Resources/public/form/js/idleTimeout.js'
    %}
        <script type="text/javascript" src="{{ asset_url }}"></script>
    {% endjavascripts %}

    <script language="Javascript">

        $(document).ready(function() {

            regularCombobox();
            customCombobox();			
            fieldInputMask();
            expandTextarea();

            $('.cwid').val('');

            $(".hascwid").find('input:radio').on('change', function(){
                var checkedValue = $(this).val();
                //console.log("checkedValue="+checkedValue);

                if( checkedValue == "Yes" ) {
                    $("#oleg_orderformbundle_userrequesttype_cwid").prop('disabled', false);
                    //disable all fields, except some
                    var allInputs = $(":input").not('.hascwid, .cwid-password, .cwid, :button, :radio, #username, #password');
                    allInputs.prop('disabled', true);
                    $('#password_field').show();
                } else {
                    $('.cwid').val('');
                    $(":input").prop('disabled', false);
                    $("#oleg_orderformbundle_userrequesttype_cwid").prop('disabled', true);
                    $('#password_field').hide();
                }

            });

        });

        function submitRequestForm() {

            var checkedValue = $("#accountrequestform input[type='radio']:checked").val();

            if( checkedValue == "Yes" ) {

                //copy fields
                var cwid = $('.cwid').val();
                $('#username').val(cwid);
                var pwd = $('.cwid-password').val();
                $('#password').val(pwd);

                $("#display_height").value = screen.height;
                $("#display_width").value = screen.width;

                $('#loginform').submit();

            } else {

                $('#accountrequestform').submit();

            }

        }

    </script>


</body>

</html>

