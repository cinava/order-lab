{% extends "OlegOrderformBundle::Default/base.html.twig" %}
{#{% extends "OlegUserdirectoryBundle::Default/base.html.twig" %}#}

{% block title %}
    Scan Order System
{% endblock %}




{% block content %}

    <div style="margin-top:25px;">

        {#<form class="navbar-form" role="search" id="user-typeahead-ordersearch-form" action="{{ path(scan_sitename~'_home') }}" method="get">#}
            {#<div class="form-group">#}
                {#<div id="multiple-datasets-typeahead-ordersearch">#}
                    {#<input#}
                            {#type="text"#}
                            {#class="typeahead submit-on-enter-field"#}
                            {#name="search" value="{{ search }}"#}
                            {#placeholder="Search for a name, service, division, etc"#}
                            {#>#}
                {#</div>#}
            {#</div>#}
            {#<button type="submit" class="btn btn-lg" style="height: 50px">Search</button>#}
            {#&#123;&#35;<button class="btn btn-lg" type="submit" style="height: 50px">Search</button>&#35;&#125;#}
        {#</form>#}

        <br>


        {#display search result for patients #}
        {% set patientShowed = false %}
        {% if (entities and entities|length > 0) or (sameusers is defined and sameusers) %}
            {% include 'OlegOrderformBundle::Admin/patients-content.html.twig' with {'sitename': scan_sitename} %}
            {% set patientShowed = true %}
        {% endif %}

        {#display No results are found #}
        {% if search and (not patientShowed) %}
            <br><br>
            <h5 class="text-info">No results found.</h5>
        {% endif %}


    </div>



{% endblock %}



{% block contentleft %}

    {% set comments = render(controller("OlegOrderformBundle:History:notViewedComments")) %}


    <div style="margin-top: 150px;">
        <p>
            Welcome to the Scan Order System!
        </p>

        {% if app.security.getToken().getUser.getEmail == "" %}
            <p>
                If you would like to receive email notifications regarding your orders, please take a moment to update
                <a href="{{ path(scan_sitename~'_showuser', { 'id': app.security.getToken().getUser.getId }) }}">your profile</a>
                by adding your email account.
            </p>
        {% endif %}

        <p>
            Please use the menu on the top to place a <a href="{{ path('single_new') }}">One-Slide</a>, <a href="{{ path('multi_new') }}">Multi-Slide</a>, or a <a href="{{ path('table_create') }}">Table-View</a> Scan Order or select <a href="{{ path('my-scan-orders') }}">My Scan Orders</a> to review the status of the orders you have placed.
        </p>

        <p>
            You can also
            <a href="{{ path('slide-return-request-table') }}">request slide return</a>
            and
            <a href="{{ path('my-slide-return-requests') }}">view the status of your submitted slide return requests</a>.
        </p>

        <p>
            Lastly, please review and update your <a href="{{ path(scan_sitename~'_showuser', { 'id': app.security.getToken().getUser.getId }) }}">profile</a>.
        </p>


        <p>

            {% if comments is defined and comments > 0 %}

                <a href="{{ path('my-scan-orders',{'filter_search_box[filter]': 'With New Comments'}) }}">{{ comments }} new comment(s)</a> added to your order(s).

            {% endif %}

        </p>


        <p>

            {% if is_granted('ROLE_SCANORDER_PROCESSOR') %}

                {% set admincomments = render(controller("OlegOrderformBundle:History:notViewedAdminComments")) %}

                View <a href="{{ path('incoming-scan-orders') }}">Incoming Scan Orders</a>. There are:

                <ul>
                    <li>
                        <a href="{{ path('incoming-scan-orders',{'filter_search_box[filter]': 'All Not Filled'}) }}">{{ unprocessed }} unprocessed order(s)</a>
                    </li>

                    <li>
                        <a href="{{ path('incoming-slide-return-requests',{'filter_search_box[filter]':'active'}) }}">{{ sliderequests }} unprocessed slide return request(s)</a>
                    </li>

                    <li>
                        <a href="{{ path('incoming-scan-orders',{'filter_search_box[filter]': 'With New Comments'}) }}">{{ admincomments }} new comment(s)</a>
                    </li>

                    <li>
                        <a href="{{ path('accountrequest') }}">{{ accountreqs }} unprocessed account request(s) from users without CWIDs</a>
                    </li>

                    <li>
                        <a href="{{ path(scan_sitename~'_accessrequest_list') }}">{{ accessreqs }} unprocessed access request(s) from users with CWIDs</a>
                    </li>

                </ul>

            {% endif %}

        </p>


    </div>

{% endblock %}
