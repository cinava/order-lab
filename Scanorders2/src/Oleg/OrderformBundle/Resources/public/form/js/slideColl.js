/**
 * JS for slide coollections
 * Created with JetBrains PhpStorm.
 * User: oli2002
 * Date: 9/10/13
 * Time: 9:11 AM
 * To change this template use File | Settings | File Templates.
 */


//type:       single or multi
//ident:      specialStains or relevantScans
//*Count:     object id
function addCollField( ident, type, patient, specimen, accession, part, block, slide ) {

    var prefix = "oleg_orderformbundle_orderinfotype_";

    //Id Generated by Symfony: oleg_orderformbundle_orderinfotype_patient_0_specimen_0_accession_0_part_0_block_0_slide_0_relevantScans_0_name
    var uid = 'patient_'+patient+'_specimen_'+specimen+'_accession_'+accession+'_part_'+part+'_block_'+block+'_slide_'+slide+'_'+ident;

    //console.log("type="+type);
    if( type == "single" ) {
        //oleg_orderformbundle_slidetype_relevantScans_0_name
        prefix = "oleg_orderformbundle_slidetype_";
        uid = ident;
    }

    //get coll count from id: oleg_orderformbundle_orderinfotype_patient_0_specimen_0_accession_0_part_0_block_0_slide_0_relevantScans_0_name

    //oleg_orderformbundle_orderinfotype_patient_0_specimen_0_accession_0_part_0_block_0_slide_0_relevantScans
    var partialId = prefix + uid ;//+ "_name";
    //console.log("partialId="+partialId);

    var elements = $('[id^='+partialId+']');
    //console.log("elements length="+elements.length);

    var coll = elements.length;
    //console.log("diffdiagInt="+diffdiagInt);

    var newForm = getCollField( ident, patient, specimen, accession, part, block, slide, coll );

    //oleg_orderformbundle_orderinfotype_patient_0_specimen_0_accession_0_part_0_block_0_slide_0_relevantScans_0_name
    var addto = "#" + prefix + uid + "_" + (coll-1) + "_name";
    //console.log("addto="+addto);
    $(addto).after(newForm);

    //add del btn if length == 0
    if( (coll-1) == 0 ) {
        var delbtnId = 'delbtn_patient_'+patient+'_specimen_'+specimen+'_accession_'+accession+'_part_'+part+'_block_'+block+'_slide_'+slide+'_'+ident;
        var addbtnId = 'addbtn_patient_'+patient+'_specimen_'+specimen+'_accession_'+accession+'_part_'+part+'_block_'+block+'_slide_'+slide+'_'+ident;
        var btnDel = '&nbsp;<button id="'+delbtnId+'" onClick="delCollField(\''+ident+'\',' + "\'"+type+"\'," + patient + ',' +specimen+','+accession+','+part+','+block+','+slide+')" class="btn btn-sm btn-danger" type="button">-</button>';
        $("#"+addbtnId).after(btnDel);
    }

    expandTextarea();
}


//add coll input field first time by JS
function addCollFieldFirstTime( ident, ids ) {

    var patient = ids[0];
    var specimen = ids[1];
    var accession = ids[2];
    var part = ids[3];
    var block = ids[4];
    var slide = ids[5];

    //console.log("ident="+ident+",ids="+ids+",patient="+patient+ ",specimen="+specimen+",accession="+accession+",part="+part+",block="+block+",slide="+slide);

    var newForm = getCollField( ident, patient, specimen, accession, part, block, slide, 0 );

    //get addto dimamically: get parent and attach input to this parent
    //id=oleg_orderformbundle_orderinfotype_patient_0_specimen_0_accession_0_part_0_block_0_slide_0_microscopicdescr
    var prevId = 'oleg_orderformbundle_orderinfotype_patient_'+patient+'_specimen_'+specimen+'_accession_'+accession+'_part_'+part+'_block_'+block+'_slide_'+slide+'_microscopicdescr';
    //console.log("prevId="+prevId);

    //get parent
    var parent = $('#'+prevId).parent();
    //console.log( "parent=" + parent.attr('class') );
    var grandParent = parent.parent();
    //console.log( "grandParent="+grandParent.attr('class') );
    //addto = parentId;
    //console.log("1 addto="+addto);

    var delbtnId = 'delbtn_patient_'+patient+'_specimen_'+specimen+'_accession_'+accession+'_part_'+part+'_block_'+block+'_slide_'+slide+'_'+ident;
    var addbtnId = 'addbtn_patient_'+patient+'_specimen_'+specimen+'_accession_'+accession+'_part_'+part+'_block_'+block+'_slide_'+slide+'_'+ident;

    //add button
    var btnAdd = '<button id="'+addbtnId+'" onClick="addCollField(\''+ident+'\',' + "\'multi\'," + patient + ',' +specimen+','+accession+','+part+','+block+','+slide+')" class="btn btn-sm btn-info" type="button">+</button>';
//    var btnDel = '<button id="'+delbtnId+'" onClick="delCollField(\''+ident+'\',' + "\'multi\'," + patient + ',' +specimen+','+accession+','+part+','+block+','+slide+')" class="btn btn-sm btn-danger" type="button">-</button>';

    var name = "Results of Special Stains:";
    if( ident == "relevantScans" ) {
        name = "Relevant Scanned Images:";
    }

    //create form with bs3 rows
    var finalForm = '<p><div class="row">'+
        '<div class="col-xs-6" align="right">'+
        '<b>'+name+'</b>' +
        '</div>' +
        '<div class="col-xs-6" align="left">' +
        '<div style="float:left; width:100%">' +
            '<div class="fieldInputColl">' +
                newForm +
            '</div>'+
            '<div class="addDelBtnColl">' +
                btnAdd +
            '</div>'+
        '</div>'+
        '</div>'+
        '</div></p>';

    //$('#'+addto).after(newForm);
    //$('#'+addto).append(newForm);
    grandParent.after(finalForm);

}

//get input field only
function getCollField( ident, patient, specimen, accession, part, block, slide, coll ) {
    //console.log("coll field input:"+ident+"_"+patient+"_"+specimen+"_"+accession+"_"+part+"_"+block+"_"+slide+"_"+coll);
    //diffDiagnoses_field_0_0_0_0_0_0_0_0_diffdiag_0
    var dataholder = "#form-prototype-data"; //fixed data holder
    //console.log(dataholder+", ident="+ident+", coll="+coll);
    var collectionHolder =  $(dataholder);
    var prototype = collectionHolder.data('prototype-'+ident.toLowerCase());
    //console.log("prototype="+prototype);

    var newForm = prototype.replace(/__patient__/g, patient);
    newForm = newForm.replace(/__specimen__/g, specimen);
    newForm = newForm.replace(/__accession__/g, accession);
    newForm = newForm.replace(/__part__/g, part);
    newForm = newForm.replace(/__block__/g, block);
    newForm = newForm.replace(/__slide__/g, slide);

    var regex = new RegExp( '__' + ident + '__', 'g' );
    newForm = newForm.replace(regex, coll);

    //console.log("newForm="+newForm);
    return newForm;
}


function delCollField( ident, type, patient, specimen, accession, part, block, slide ) {

    //console.log("Del: ident="+ident+",type="+type+",patient="+patient+ ",specimen="+specimen+",accession="+accession+",part="+part);

    //Id Generated by Symfony: oleg_orderformbundle_orderinfotype_patient_0_specimen_0_accession_0_part_0_diffDiagnoses_0_name
    var uid = 'patient_'+patient+'_specimen_'+specimen+'_accession_'+accession+'_part_'+part+'_block_'+block+'_slide_'+slide+'_'+ident;

    var prefix = "oleg_orderformbundle_orderinfotype_";

    if( type == "single" ) {
        //oleg_orderformbundle_slidetype_relevantScans_0_name
        prefix = "oleg_orderformbundle_slidetype_";
        uid = ident;
    }

    //ger diffdiag count from id
    var partialId = prefix+uid+"_";
    //console.log("partialId="+partialId);

    var elements = $('[id^='+partialId+']');
    //console.log("elements length="+elements.length);

    collInt = elements.length - 1;
    //console.log("diffdiagInt="+collInt);

    //check if this field is not he last one
    if( collInt <= 0 ) {
        return false;
    }

    //delete without asking confirmation if the input field is empty
    //remove id: oleg_orderformbundle_orderinfotype_patient_0_specimen_0_accession_0_part_0_diffDiagnoses_1_name
    var delId = partialId+collInt+'_name';
    //console.log("delId="+delId);

    var text = $('#'+delId).val();
    //console.log("text="+text);

    if( text == "" ) {

        remDelBtn(ident, type, patient, specimen, accession, part, block, slide, collInt);

        $('#'+delId).remove();
    } else {

        remDelBtn(ident, type, patient, specimen, accession, part, block, slide, collInt);

        if( confirm("Are you sure?") || text == "" ) {
            $('#'+delId).remove();
        }
    }

    return false;
}

function remDelBtn(ident, type, patient, specimen, accession, part, block, slide, collInt) {
    //remove - button for the last field
    //console.log("del collInt="+collInt);
    if( collInt == 1 ) {
        var delbtnId = 'delbtn_patient_'+patient+'_specimen_'+specimen+'_accession_'+accession+'_part_'+part+'_block_'+block+'_slide_'+slide+'_'+ident;
        $('#'+delbtnId).remove();
    }
}


////////////////// different diagnoses (uses as generic collection field; here, the name "different diagnoses" is used because it was a first field for collection) ////////////////////////

//By html form: add different diagnoses input field
function addDiffdiagField( name, type, patient, specimen, accession, part, block, slide ) {

    //console.log("Add: name="+name+",type="+type+",patient="+patient+ ",specimen="+specimen+",accession="+accession+",part="+part+",block="+block+",slide="+slide);

    //var prefix = "oleg_orderformbundle_orderinfotype_";
    var prefix = "inputGroupId_";
    var fieldPrefix = "oleg_orderformbundle_orderinfotype";
    var partialUid = 'patient_'+patient+'_specimen_'+specimen+'_accession_'+accession+'_part_'+part+'_block_'+block+'_slide_'+slide;

    //Id Generated by Symfony: oleg_orderformbundle_orderinfotype_patient_0_specimen_0_accession_0_part_0_diffDiagnoses_0_name
    if( name == "diffDiagnoses" ) {
        var uid = 'patient_'+patient+'_specimen_'+specimen+'_accession_'+accession+'_part_'+part;
    }
    if( name == "relevantScans" ) {
        var uid = 'patient_'+patient+'_specimen_'+specimen+'_accession_'+accession+'_part_'+part+'_block_'+block+'_slide_'+slide;
    }
    var typeuid = uid + "_";

    if( type == "single" ) {
        if( name == "diffDiagnoses" ) {
            fieldPrefix = "oleg_orderformbundle_parttype";
        }
        if( name == "relevantScans" ) {
            fieldPrefix = "oleg_orderformbundle_slidetype";
        }
        typeuid = '';
    }

    //ger diffdiag count from id
    var partialId = prefix + partialUid + "_"+name;
    //console.log("partialId="+partialId);
    //inputGroupId_patient_0_specimen_0_accession_0_part_1_block_0_slide_0_diffDiagnoses
    //inputGroupId_patient_0_specimen_0_accession_0_part_0_block_1_slide_0_diffDiagnoses_0_diffDiagnoses

    var elements = $('[id^='+partialId+']');
    //console.log("elements length="+elements.length);

    diffdiagInt = elements.length;
    //console.log("diffdiagInt="+diffdiagInt);

    var newForm = getDiffdiagField( name, type, patient, specimen, accession, part, block, slide, diffdiagInt, false );

    //var ending = "_name";
    var ending = "_"+name;

    //add to last input field
    var addto = elements[elements.length-1].id
    //console.log("form addto="+addto);
    $("#"+addto).after(newForm);

    //add '-' button for the first input field if it is not existed yet
    if( diffdiagInt == 1 ) {
        //id of the input field: oleg_orderformbundle_orderinfotype_patient_0_specimen_0_accession_0_part_0_diffDiagnoses_4_name
        var firstPartialId = fieldPrefix + "_" + typeuid +  name + "_";
        //console.log("firstPartialId="+firstPartialId);
        var partialInputElements = $('[id^='+firstPartialId+']');
        var addId = partialInputElements[0].id;

        var currFiledCollId = getCollId(name, addId);
        var btnDel = getDelBtn(name, type, patient, specimen, accession, part, block, slide, currFiledCollId);

        //console.log("!!!! add '-' to the first input field: addId="+addId);
        $("#"+addId).after(btnDel);
    }

    //remove + for the previous button all the time
    //get array of all + buttons and remove the first one
    //delbtn_patient_0_specimen_0_accession_0_part_0_diffDiagnoses_3_diffDiagnoses
    var lastAddBtnPartialId = "addbtn_" + partialUid + "_" + name + "_";
    //console.log("lastAddBtnPartialId="+lastAddBtnPartialId);
    var lastAddBtnPartialElement = $('[id^='+lastAddBtnPartialId+']');
    //console.log("remove first + remid="+lastAddBtnPartialElement[0].id);
    if( lastAddBtnPartialElement.id != "undefined" ) {
        lastAddBtnPartialElement[0].remove();
    }

    expandTextarea();
}

//add different diagnoses input field first time by JS
function addDiffdiagFieldFirstTime( name, ids ) {

    var patient = ids[0];
    var specimen = ids[1];
    var accession = ids[2];
    var part = ids[3];
    var block = ids[4];
    var slide = ids[5];
    var type = 'multi';
    var currFiledCollId = 0;
    var noDelBtn = true;

    //console.log("name="+name+",ids="+ids+",patient="+patient+ ",specimen="+specimen+",accession="+accession+",part="+part+",block="+block+",slide="+slide);

    if( name == "part" ) {
        var ident = "diffDiagnoses";
        var title = "Differential Diagnoses:";
        var prevId = 'oleg_orderformbundle_orderinfotype_patient_'+patient+'_specimen_'+specimen+'_accession_'+accession+'_part_'+part+'_diagnosis';
    }

    if( name == "slide" ) {
        var ident = "relevantScans";
        var title = "Relevant Scanned Images:";
        var prevId = 'oleg_orderformbundle_orderinfotype_patient_'+patient+'_specimen_'+specimen+'_accession_'+accession+'_part_'+part+'_block_'+block+'_slide_'+slide+'_microscopicdescr';
    }

    var newForm = getDiffdiagField( ident, type, patient, specimen, accession, part, block, slide, currFiledCollId, noDelBtn );
    //console.log("name="+name+", newForm="+newForm);

    //var addBtnId = 'addbtn_patient_'+patient+'_specimen_'+specimen+'_accession_'+accession+'_part_'+part+'_'+ident+'_'+currFiledCollId+'_'+ident;
    var inputGroupId = 'inputGroupId_patient_'+patient+'_specimen_'+specimen+'_accession_'+accession+'_part_'+part+'_block_'+block+'_slide_'+slide+'_'+ident+'_'+currFiledCollId+'_'+ident;

    //create form with bs3 rows
    var finalForm = '<p><div class="row">'+

        '<div class="col-xs-6" align="right">'+
        '<b>' + title + '</b>' +
        '</div>' +

        '<div class="col-xs-6" align="left">' +

        '<div class="fieldInputColl">' +
        newForm +
        '</div>'+

        '</div>'+
        '</div></p>';


    //get addto dimamically: get parent and attach input to this parent
    //id=oleg_orderformbundle_orderinfotype_patient_0_specimen_0_accession_0_part_2_diagnosis
    //var prevId = 'oleg_orderformbundle_orderinfotype_patient_'+patient+'_specimen_'+specimen+'_accession_'+accession+'_part_'+part+'_diagnosis'; //TODO: add block, slide
    //console.log("prevId="+prevId);

    //get parent
    var parent = $('#'+prevId).parent();
    //console.log( "parent=" + parent.attr('class') );
    var grandParent = parent.parent();
    //console.log( "grandParent="+grandParent.attr('class') );

    //$('#'+addto).after(newForm);
    //$('#'+addto).append(newForm);
    grandParent.after(finalForm);
}

//get input field only
function getDiffdiagField( name, type, patient, specimen, accession, part, block, slide, diffdiag, noDelBtn ) {

    //inputGroupId_patient_0_specimen_0_accession_0_part_0_diffDiagnoses_0_diffDiagnoses
    var ending = "_" + name + "_" + diffdiag + "_" + name;

    var dataholder = "#form-prototype-data"; //fixed data holder
    //console.log(dataholder);
    var collectionHolder =  $(dataholder);

    if( name == "diffDiagnoses" ) {
        var prototype = collectionHolder.data('prototype-diffdiagnoses');
        //console.log("prototype="+prototype);
        var newForm = prototype.replace(/__patient__/g, patient);
        newForm = newForm.replace(/__specimen__/g, specimen);
        newForm = newForm.replace(/__accession__/g, accession);
        newForm = newForm.replace(/__part__/g, part);
        newForm = newForm.replace(/__diffDiagnoses__/g, diffdiag);
    }

    if( name == "relevantScans" ) {
        var prototype = collectionHolder.data('prototype-relevantscans');
        //console.log("prototype="+prototype);
        var newForm = prototype.replace(/__patient__/g, patient);
        newForm = newForm.replace(/__specimen__/g, specimen);
        newForm = newForm.replace(/__accession__/g, accession);
        newForm = newForm.replace(/__part__/g, part);
        newForm = newForm.replace(/__block__/g, block);
        newForm = newForm.replace(/__slide__/g, slide);
        newForm = newForm.replace(/__relevantScans__/g, diffdiag);
    }

    var inputGroupId = 'inputGroupId_patient_'+patient+'_specimen_'+specimen+'_accession_'+accession+'_part_'+part+'_block_'+block+'_slide_'+slide+ending;
    //console.log("inputGroupId="+inputGroupId);

    var header = '<div class="input-group" id="'+inputGroupId+'">';

    var btnAdd = getAddBtn(name, type, patient, specimen, accession, part, block, slide, diffdiag);

    var btnDel = "";
    if( noDelBtn != true ) {
        btnDel = getDelBtn(name, type, patient, specimen, accession, part, block, slide, diffdiag);
    }

    var footer = '</div>';

    newForm = header + newForm + btnDel + btnAdd + footer;

    //console.log("newForm="+newForm);
    return newForm;
}


//delete input field and modify +/- buttons accordingly:
//1) delete the field: remove "-" button for the first field if it's not only one field
//2) delete the last field: add "+" button to the previous field
function delDiffdiagField( name, type, patient, specimen, accession, part, block, slide, diffdiag ) {

    //console.log("name="+name+",type="+type+",patient="+patient+ ",specimen="+specimen+",accession="+accession+",part="+part);

    //Id Generated by Symfony: oleg_orderformbundle_orderinfotype_patient_0_specimen_0_accession_0_part_0_diffDiagnoses_0_name
    //var uid = 'patient_'+patient+'_specimen_'+specimen+'_accession_'+accession+'_part_'+part;
    var fullUid = 'patient_'+patient+'_specimen_'+specimen+'_accession_'+accession+'_part_'+part+'_block_'+block+'_slide_'+slide;
    if( name == "diffDiagnoses" ) {
        var uid = 'patient_'+patient+'_specimen_'+specimen+'_accession_'+accession+'_part_'+part;
    }
    if( name == "relevantScans" ) {
        var uid = 'patient_'+patient+'_specimen_'+specimen+'_accession_'+accession+'_part_'+part+'_block_'+block+'_slide_'+slide;
    }
    var typeuid = uid + "_";

    //var prefix = "oleg_orderformbundle_orderinfotype_";
    var prefix = "inputGroupId_";
    var fieldPrefix = "oleg_orderformbundle_orderinfotype";

    if( type == "single" ) {
        if( name == "diffDiagnoses" ) {
            fieldPrefix = "oleg_orderformbundle_parttype";
        }
        if( name == "relevantScans" ) {
            fieldPrefix = "oleg_orderformbundle_slidetype";
        }
        typeuid = '';
    }

    //ger diffdiag count from id
    var partialId = prefix+fullUid+"_"+name+"_";
    //console.log("partialId="+partialId);

    var elements = $('[id^='+partialId+']');
    //console.log("elements length="+elements.length);

    diffdiagInt = elements.length - 1;
    //console.log("length="+elements.length+",diffdiagInt="+diffdiagInt+", diffdiag="+diffdiag);

    //don't delete if there is only one field
    if( diffdiagInt == 0 ) {
        return false;
    }

    //delete without asking confirmation if the input field is empty
    //remove id: oleg_orderformbundle_orderinfotype_patient_0_specimen_0_accession_0_part_0_diffDiagnoses_1_name
    //inputGroupId_patient_0_specimen_0_accession_0_part_0_diffDiagnoses_4_diffDiagnoses
    var delId = partialId + diffdiag + '_' + name;
    //console.log("inputGroupId delId="+delId);

    //oleg_orderformbundle_orderinfotype_patient_0_specimen_0_accession_0_part_0_diffDiagnoses_1_name
    var textId = fieldPrefix + "_" + typeuid + name + "_" + diffdiag + "_name";  //TODO: use variable instead of "name"
    var text = $('#'+textId).val();
    //console.log("textId="+textId);

    //console.log("text="+text);
    var remove = false;
    if( text === undefined || text == "" || text.trim() == "undefined" ) {
        remove = true;
    } else {
        if( confirm("Are you sure?") || text == "" ) {
            remove = true;
        }
    }

    if( remove == true ) {

        //1) remove input and all buttons
        //console.log("remove field with id="+delId);
        $('#'+delId).remove();

        //case 1: check and remove "-" button for the first field if it's not only one field
        if( diffdiagInt == 1 ) {
            //console.log("!!! remove'-'");
            //delbtn_patient_0_specimen_0_accession_0_part_0_diffDiagnoses_3_diffDiagnoses
            var lastDelBtnPartialId = "delbtn_" + fullUid + "_" + name + "_";
            var lastDelBtnPartialElement = $('[id^='+lastDelBtnPartialId+']');
            lastDelBtnPartialElement.remove();
        }

        //case 2: add + button to the last input field if it is not existed yet
        //+ button id
        //get collection id
        var elements = $('[id^='+partialId+']');
        var lastElementId = elements[elements.length-1].id;
        var currFiledCollId = getCollId(name, lastElementId);

        var lastAddBtnId = "addbtn_"+fullUid+"_"+name+"_"+currFiledCollId+'_'+name;
        if( $("#"+lastAddBtnId).length > 0 ) {
            //don't add because it already exists
            //console.log("don't add because it already exists, length="+$("#"+lastAddBtnId).length);
        } else {
            //add + button
            if( diffdiagInt == 1 ) {
                var attToId = fieldPrefix + "_" + typeuid + name + "_" + currFiledCollId + "_name";  //TODO: use variable
            } else {
                var attToId = "delbtn_" + fullUid + "_" + name + "_" + currFiledCollId + '_' + name;
            }
            var addBtn = getAddBtn(name, type, patient, specimen, accession, part, block, slide, currFiledCollId);
            //console.log("add + button: attToId="+attToId);
            $("#"+attToId).after(addBtn);
        }


    }

    return false;
}

function getCollId(name, collId) {
    //console.log("lastElementId="+lastElementId);
    var lastElementIdArr=collId.split(name+"_");
    var lastPart = lastElementIdArr[1];
    //console.log("lastPart="+lastPart);
    var currFiledCollIdArr = lastPart.split("_");
    return currFiledCollIdArr[0];
}

function remDelBtnDiffDiag_TODEL(ident, type, patient, specimen, accession, part, collInt) { //TODO: delete this function

    //remove - button for the last field
    //console.log("last field!!!! del collInt="+collInt);
    //if( collInt == 0 ) {
    //remove - button
    var delbtnId = 'delbtn_patient_'+patient+'_specimen_'+specimen+'_accession_'+accession+'_part_'+part+'_'+ident+'_'+collInt+'_'+ident;
    //console.log("delbtnId="+delbtnId);
    $('#'+delbtnId).remove();
    //}
}

function getAddBtn(ident, type, patient, specimen, accession, part, block, slide, collInt) {
    var addbtnId = 'addbtn_patient_'+patient+'_specimen_'+specimen+'_accession_'+accession+'_part_'+part+'_block_'+block+'_slide_'+slide+'_'+ident+'_'+collInt+'_'+ident;
    var btn = '<span id="'+addbtnId+'" onClick="addDiffdiagField(\''+ident+'\',\'' + type + '\',' + patient + ',' +specimen+','+accession+','+part+','+block+','+slide+')"'+
        'class="input-group-addon btn" data-toggle="datepicker" type="button"><i class="glyphicon glyphicon-plus-sign"></i></span>';
    return btn;
}

function getDelBtn(ident, type, patient, specimen, accession, part, block, slide, collInt) {
    var addbtnId = 'delbtn_patient_'+patient+'_specimen_'+specimen+'_accession_'+accession+'_part_'+part+'_block_'+block+'_slide_'+slide+'_'+ident+'_'+collInt+'_'+ident;
    var btn = '<span id="'+addbtnId+'" onClick="delDiffdiagField(\''+ident+'\',\'' + type + '\',' + patient + ',' +specimen+','+accession+','+part+','+block+','+slide+','+collInt+')"'+
        'class="input-group-addon btn" data-toggle="datepicker" type="button"><i class="glyphicon glyphicon-minus-sign"></i></span>';
    return btn;
}