{% extends "OlegTranslationalResearchBundle::Default/base.html.twig" %}

{#{% import "OlegTranslationalResearchBundle::Default/transresRequestMacros.html.twig" as transresRequestMacros %}#}
{% import "OlegOrderformBundle::Default/formmacros.html.twig" as formmacros %}

{% block title %}
    {{ title }}
{% endblock %}

{% block content %}
    <h4 class="text-info" align="center">
        {{ title|raw }}
    </h4>
    <br>

    {#<table class="records_list table table-condensed text-left">#}
        {#<thead>#}
            {#<tr>#}
                {#PI#}
            {#</tr>#}
            {#<tr>#}
                {## Projects#}
            {#</tr>#}
        {#</thead>#}
        {#<tbody data-link="row">#}
        {#{% for info in infos %}#}

            {#<tr>#}
                {#<td class="rowlink-skip">#}
                    {#{{ info }}#}
                {#</td>#}
                {#<td class="rowlink-skip">#}
                    {#info#}
                {#</td>#}
            {#</tr>#}
        {#{% endfor %}#}
        {#</tbody>#}
    {#</table>#}

    <div class="well form-search">
        {{ form_start(filterform) }}
        <div class="row">
            <div class="col-xs-2">
                {{ formmacros.fielddate(filterform.startDate,'allow-future-date') }}
            </div>
            <div class="col-xs-2">
                {{ formmacros.fielddate(filterform.endDate,'allow-future-date') }}
            </div>
            <div class="col-xs-2">
                {% if filterform.projectSpecialty is defined %}
                    {{ form_widget(filterform.projectSpecialty, {'attr': {'placeholder': 'Specialty'}}) }}
                {% endif %}
            </div>
            {#<div class="col-xs-2">#}
                {#{% if filterform.compareType is defined %}#}
                    {#{{ form_widget(filterform.compareType, {'attr': {'placeholder': 'Compare Type'}}) }}#}
                {#{% endif %}#}
            {#</div>#}
            <div class="col-xs-4">
                {% if filterform.category is defined %}
                    {{ form_widget(filterform.category) }}
                {% endif %}
            </div>
            {#<div class="col-xs-1">#}
                {#{% if filterform.showLimited is defined %}#}
                    {#{{ formmacros.checkbox(filterform.showLimited) }}#}
                    {#{{ form_label(filterform.showLimited) }}&nbsp;{{ form_widget(filterform.showLimited) }}#}
                {#{% endif %}#}
            {#</div>#}
            <div class="col-xs-1" align="left">
                <button id="filter-btn" type="submit" class="btn btn-default">Filter</button>
            </div>

            <div class="row">
                <div class="col-xs-3">
                    {% if filterform.showLimited is defined %}
                        {#{{ form_label(filterform.showLimited) }}&nbsp;{{ form_widget(filterform.showLimited) }}#}
                        {{ form_row(filterform.showLimited) }}
                    {% endif %}
                </div>
                <div class="col-xs-3" align="left">
                    {% if filterform.quantityLimit is defined %}
                        {#{{ form_label(filterform.quantityLimit) }}&nbsp;{{ form_widget(filterform.quantityLimit) }}#}
                        {{ form_row(filterform.quantityLimit) }}
                    {% endif %}
                </div>
            </div>

        </div>
        {{ form_end(filterform) }}
    </div>


    {#<div class="chart"></div>#}

    <div id="charts" align="center">
        <!-- Plotly chart will be drawn inside this DIV -->
    </div>

{% endblock %}


{% block additionaljs %}

    {% javascripts
    '@OlegUserdirectoryBundle/Resources/public/charts/plotly/plotly.js'
    '@OlegTranslationalResearchBundle/Resources/public/form/js/transres-plotly.js'
    %}
    <script type="text/javascript" src="{{ asset_url }}"></script>
    {% endjavascripts %}

    {#<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>#}
    {#<script src="https://cdnjs.cloudflare.com/ajax/libs/numeric/1.2.6/numeric.min.js"></script>#}

    <script type="text/javascript">
        var charts = {{ chartsArray|json_encode|raw }};
    </script>

{% endblock %}


{#{% block additionalcss %}#}
    {#<style type="text/css">#}
    {#</style>#}
{#{% endblock %}#}

