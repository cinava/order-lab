{% extends "OlegTranslationalResearchBundle::Default/base.html.twig" %}

{% import "OlegOrderformBundle::Default/formmacros.html.twig" as formmacros %}
{% import "OlegTranslationalResearchBundle::Default/transres.html.twig" as transres %}

{% block title %}
    {{ title }}
{% endblock %}


{% block content %}

    <h4 class="text-info" align="center">
        {{ title }}
    </h4>
    <br>

    <input type="hidden" id="formnodetrigger" value="{{ formnodetrigger }}" />
    <input type="hidden" id="formnodeTopHolderId" value="{{ formnodeTopHolderId }}" />

    {% set sitename = translationalresearch_sitename %}

    {{ form_start(form) }}


        {% if form.state is defined %}
            {{ formmacros.field(form.state) }}
        {% endif %}

        {% if form.approvalDate is defined %}
            {{ formmacros.field(form.approvalDate) }}
        {% endif %}

        {% if form.createDate is defined or form.submitter is defined %}
            {#<div class="well well-sm">#}
            {% if form.createDate is defined %}
                {{ formmacros.field(form.createDate) }}
            {% endif %}
            {% if form.submitter is defined %}
                {{ formmacros.field(form.submitter) }}
            {% endif %}
            {#</div>#}
        {% endif %}

        <br>
        {{ transres.projectRequesters(form,project,cycle) }}

        {#{% if form.vars.id  %}#}
            {#{{ formmacros.simplefield("Project #:", form.vars.id, "input", "disabled") }}#}
        {#{% endif %}#}

        {#<div id="form-prototype-data"#}
             {#data-prototype-transres-irbreviews = "{{ transres.projectSingleReview(form,form.irbReviews,cycle,'transres-irbreviews','prototype', sitename,1)|e }}"#}
             {#data-prototype-transres-adminreviews = "{{ transres.projectSingleReview(form,form.adminReviews,cycle,'transres-adminreviews','prototype', sitename,1)|e }}"#}
             {#data-prototype-transres-committeereviews = "{{ transres.projectSingleReview(form,form.committeeReviews,cycle,'transres-committeereviews','prototype', sitename,1)|e }}"#}
             {#data-prototype-transres-finalreviews = "{{ transres.projectSingleReview(form,form.finalReviews,cycle,'transres-finalreviews','prototype', sitename,1)|e }}"#}
        {#></div>#}
        {{ transres.getProjectReviewPrototypeFormData(form,cycle,sitename) }}

        {{ transres.projectReviews(form,cycle,sitename) }}


        {% if form.updateDate is defined or form.updateUser is defined  %}
            <div class="well well-sm">
                {% if form.updateDate is defined %}
                    {{ formmacros.field(form.updateDate) }}
                {% endif %}
                {% if form.updateUser is defined %}
                    {{ formmacros.field(form.updateUser) }}
                {% endif %}
            </div>
        {% endif %}


        {{ transres.projectForm(form,null,cycle) }}

        {#{{ formmacros.checkbox(form.readyForReview) }}#}

        {#{% if form.primaryReviewerComment is defined %}#}
            {#{{ formmacros.field(form.primaryReviewerComment) }}#}
        {#{% endif %}#}


        {#<input class="btn btn-primary" type="submit" value="Create New Project" />#}

        {% if form.saveAsDraft is defined %}
            {{ form_widget(form.saveAsDraft) }}
        {% endif %}
        {% if form.saveAsComplete is defined %}
            {{ form_widget(form.saveAsComplete) }}
        {% endif %}

    {{ form_end(form) }}

    <br>


    <p>
        <a href="{{ path(translationalresearch_sitename~'_project_index') }}">Back to the project list</a>
    </p>

{% endblock %}
