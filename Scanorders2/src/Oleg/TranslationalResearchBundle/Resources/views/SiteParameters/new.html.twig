{% extends "OlegTranslationalResearchBundle::Default/base.html.twig" %}

{% import "OlegOrderformBundle::Default/formmacros.html.twig" as formmacros %}
{% import "OlegTranslationalResearchBundle::Default/transresRequestMacros.html.twig" as transresRequestMacros %}
{% import "OlegTranslationalResearchBundle::Default/transres.html.twig" as transres %}
{% import "OlegUserdirectoryBundle::Default/usermacros.html.twig" as usermacros %}

{% block title %}
    {{ title }}
{% endblock %}


{% block content %}

    <input type="hidden" id="formcycle" value="{{ cycle }}" />

    {#<div id="form-prototype-data"#}
         {#data-userurllink = "{{ usermacros.userUrlLink()|e }}"#}
         {#data-uploadurl = "{{ oneup_uploader_endpoint('transres_gallery') }}"#}
         {#data-userid = "{{ app.user.id }}"#}
    {#></div>#}

    <h4 class="text-info" align="center">
        {{ title }}
    </h4>

    <br>

    {% set sitename = translationalresearch_sitename %}

    {{ form_start(form) }}

        <div id="form-prototype-data"
             data-userurllink = "{{ usermacros.userUrlLink()|e }}"
             data-uploadurl = "{{ oneup_uploader_endpoint('transres_gallery') }}"
             data-userid = "{{ app.user.id }}"
        ></div>

        {% if form.createDate is defined %}
            {{ formmacros.field_left(form.createDate) }}
        {% endif %}
        {% if form.creator is defined %}
            {{ formmacros.field_left(form.creator) }}
        {% endif %}

        <hr />

        {% if form.transresLogo is defined %}
            <div class="well form-element-holder user-documents">
                <label class="col-xs-12 control-label">Logo</label>
                <div class="row withpaddingtop">
                    <div class="col-xs-12">
                        {#
                        container,
                        documents,
                        cycle,
                        prototype,
                        dropzoneInit, ('default')
                        documentType, ('')
                        asFormOrEntity,
                        formRest
                        #}
                        {{
                            usermacros.singleDocumentContainer(
                                form,
                                form.transresLogo,
                                cycle,
                                'noprototype',
                                'default',
                                'Logo',
                                'asForm',
                                false
                            )
                        }}
                    </div>
                </div>
            </div>
        {% endif %}


        {{ formmacros.field(form.transresFromHeader) }}
        {{ formmacros.field(form.transresFooter) }}
        {{ formmacros.field(form.transresNotificationEmail) }}
        {#{{ formmacros.field(form.transresLogo) }}#}

        <p>
            {% if form.save is defined %}
                {{ form_widget(form.save) }}
            {% endif %}
            {% if form.edit is defined %}
                {{ form_widget(form.edit) }}
            {% endif %}
        </p>


    {{ form_end(form) }}

    {% if cycle == "show" %}
        <p>
            <a class="btn btn-warning" href="{{ path(translationalresearch_sitename~'_standalone_siteparameters_edit',{'specialtyStr':siteParameter.getProjectSpecialty().getAbbreviation()}) }}">Edit Site Parameters</a>
        </p>
    {% endif %}

    {% if cycle == "edit" %}
        <p>
            <a class="btn btn-primary" href="{{ path(translationalresearch_sitename~'_standalone_siteparameters_show',{'specialtyStr':siteParameter.getProjectSpecialty().getAbbreviation() }) }}">Cancel</a>
        </p>
    {% endif %}


{% endblock %}
