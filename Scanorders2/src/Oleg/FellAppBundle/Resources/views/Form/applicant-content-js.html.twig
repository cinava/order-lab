
<script language="Javascript">


    $(document).ready(function() {

        showHideWell('.fellapp-ecfmgcertificate-field');
        showHideWell('.fellapp-reprimand-field');
        showHideWell('.fellapp-lawsuit-field');



        $('.textarea').bind('keydown keyup keypress cut copy past blur change', function(){
            copy_to_print_helper(this); // consider debouncing this to avoid slowdowns!
        });

        $('textarea').each(function(){
            copy_to_print_helper(this); // on initial page load
        });

    });

    //http://stackoverflow.com/questions/4435906/print-when-textarea-has-overflow
    function copy_to_print_helper(element){
        var print_helper = $(element).closest('.well').find('.print_helper');
        if( print_helper ) {
            print_helper.text($(element).val());
        }
    }

    function hideWell(element) {
        $(element).closest('.form-element-holder').find('.wellcollapsable').hide(500);
        $(element).closest('.form-element-holder').find('.wellcollapsable').find('input,textarea').val('');
        //resetUploadBtn($(element).closest('.form-element-holder').find('.wellcollapsable'));
    }

    function showWell(element) {
        $(element).closest('.form-element-holder').find('.wellcollapsable').show(500);
    }

    function showHideWell(element) {

        //console.log('showHideWell');

        if( $(element).is(':checked') ) {
            showWell(element);
        } else {
            hideWell(element);
        }

        //listener
        $(element).click( function() {
            showHideWell(this);
        });
    }

    function updateFellapp(fellappId) {

        //first update report
        //TODO: use messaging
        updateFellAppReport(fellappId);

        //submit form
        $('#fellapp-applicant-form').submit();
    }

    //TODO: use messaging
    function updateFellAppReport(fellappId) {
        var url = Routing.generate('fellapp_update_report');

        //var fellappId = $('#fellapp_id').val();
        //console.log('fellappId='+fellappId);

        $.ajax({
            type: "POST",
            url: url,
            timeout: _ajaxTimeout,
            async: true,
            data: {id: fellappId}
        }).success(function(data) {
            //console.log('data='+data);
        }).fail(function(data) {
            console.log('fellapp update report failed: '+data);
        });
    }

</script>


